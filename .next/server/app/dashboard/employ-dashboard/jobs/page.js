(()=>{var e={};e.id=7750,e.ids=[7750],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},79962:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>h,tree:()=>c});var s=a(67096),r=a(16132),o=a(37284),n=a.n(o),i=a(32564),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let c=["",{children:["dashboard",{children:["employ-dashboard",{children:["jobs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,62439)),"D:\\avdent\\mmv_freelance_frontend\\src\\app\\dashboard\\employ-dashboard\\jobs\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,67925)),"D:\\avdent\\mmv_freelance_frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\avdent\\mmv_freelance_frontend\\src\\app\\dashboard\\employ-dashboard\\jobs\\page.tsx"],p="/dashboard/employ-dashboard/jobs/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/employ-dashboard/jobs/page",pathname:"/dashboard/employ-dashboard/jobs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},52420:(e,t,a)=>{Promise.resolve().then(a.bind(a,56944))},56944:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>page});var s=a(30784),r=a(9885),o=a(26971),n=a(90906),i=a(92919),l=a(11440),c=a.n(l),d=a(4102);let job_item=({title:e,info:t,date:a,application:r,projectsTaskId:o})=>(0,s.jsxs)("tr",{className:status,children:[(0,s.jsxs)("td",{children:[s.jsx("div",{className:"job-name fw-500",children:e}),s.jsx("div",{className:"info1",children:t})]}),s.jsx("td",{children:a}),s.jsx("td",{children:s.jsx(c(),{href:`/applications/details/${o}`,children:(0,s.jsxs)("span",{className:"text-primary",style:{cursor:"pointer"},children:[r," Applications"]})})}),s.jsx("td",{children:(0,s.jsxs)("div",{className:"action-dots float-end",children:[s.jsx("button",{className:"action-btn dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:s.jsx("span",{})}),s.jsx(d.Z,{projectsTaskId:o,deletedBy:Number(localStorage.getItem("user_id"))})]})})]});var p=a(57897),u=a(48781);let job_area=({setIsOpenSidebar:e})=>{let[t,a]=(0,r.useState)([]),[o,n]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),fetchProjectTask=async()=>{let e=(0,p.r)(),t=e?.user_id;if(!t){console.error("No user_id found in token"),n(!1);return}try{let e=await (0,u.xe)(`projectsTask/tasks-with-client/${t}`);if(console.log("response",e),e.data?.data?.length){let t=e.data.data.map(e=>({...e,applicants:0}));for(let e of t)try{let t=await (0,u.jB)("applications/projects/get-application-count",{projects_task_id:e.projects_task_id});e.count=t.data?.count||0}catch(t){console.error(`Failed to get count for project ${e.projects_task_id}`,t),e.count=0}console.log("Project Data: ",t),a(t)}else console.error("No data found"),a([])}catch(e){console.error("Error fetching project task:",e),a([])}},fetchProjectByStatus=async e=>{let t=(0,p.r)(),s=t?.user_id;if(!s){console.error("No user_id found in token"),n(!1);return}try{let t=await (0,u.jB)("applications/getStatus",{client_id:s,status:e});if(console.log(`Status ${e} projects response:`,t.data),t.data?.data?.length){let e=t.data.data.map(e=>({...e,applicants:0}));for(let t of e)try{let e=await (0,u.jB)("applications/projects/get-application-count",{projects_task_id:t.projects_task_id});t.count=e.data?.count||0}catch(e){console.error(`Failed to get count for project ${t.projects_task_id}`,e),t.count=0}a(e)}else a([])}catch(e){console.error("Error fetching projects by status:",e),a([])}finally{n(!1)}};return(0,r.useEffect)(()=>{fetchProjectTask()},[]),s.jsx("div",{className:"dashboard-body",children:(0,s.jsxs)("div",{className:"position-relative",children:[s.jsx(i.Z,{setIsOpenSidebar:e}),(0,s.jsxs)("div",{className:"d-sm-flex align-items-center justify-content-between mb-40 lg-mb-30",children:[s.jsx("h2",{className:"main-title m0",children:"My Jobs"}),s.jsx("div",{className:"d-flex ms-auto xs-mt-30",children:(0,s.jsxs)("div",{className:"nav nav-tabs tab-filter-btn me-4",id:"nav-tab",role:"tablist",children:[s.jsx("button",{className:`nav-link ${null===l?"active":""}`,"data-bs-toggle":"tab","data-bs-target":"#a1",type:"button",role:"tab","aria-selected":"true",onClick:()=>{c(null),fetchProjectTask()},children:"All"}),s.jsx("button",{className:"nav-link","data-bs-toggle":"tab","data-bs-target":"#a1",type:"button",role:"tab","aria-selected":"false",children:"New"}),s.jsx("button",{className:`nav-link ${0===l?"active":""}`,"data-bs-toggle":"tab","data-bs-target":"#a1",type:"button",role:"tab","aria-selected":"false",onClick:()=>{c(0),fetchProjectByStatus(0)},children:"On Going"}),s.jsx("button",{className:`nav-link ${1===l?"active":""}`,"data-bs-toggle":"tab","data-bs-target":"#a1",type:"button",role:"tab","aria-selected":"false",onClick:()=>{c(1),fetchProjectByStatus(1)},children:"Completed"})]})})]}),s.jsx("div",{className:"bg-white card-box border-20",children:(0,s.jsxs)("div",{className:"tab-content",id:"nav-tabContent",children:[s.jsx("div",{className:"tab-pane fade show active",id:"a1",role:"tabpanel",children:s.jsx("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table job-alert-table",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{scope:"col",children:"Title"}),s.jsx("th",{scope:"col",children:"Job Created"}),s.jsx("th",{scope:"col",children:"Applicants"}),s.jsx("th",{scope:"col",children:"Action"})]})}),s.jsx("tbody",{className:"border-0",children:t.length>0?t.map(e=>s.jsx(job_item,{title:e.project_title,info:e.country,application:e.count,date:new Date(e.created_at).toLocaleDateString("en-US",{day:"2-digit",month:"long",year:"numeric"}),projectsTaskId:e.projects_task_id},e.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:5,children:"No applied projects found."})})})]})})}),s.jsx("div",{className:"tab-pane fade",id:"a2",role:"tabpanel"})]})}),s.jsx("div",{className:"dash-pagination d-flex justify-content-end mt-30",children:(0,s.jsxs)("ul",{className:"style-none d-flex align-items-center",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"active",children:"1"})}),s.jsx("li",{children:s.jsx("a",{href:"#",children:"2"})}),s.jsx("li",{children:s.jsx("a",{href:"#",children:"3"})}),s.jsx("li",{children:".."}),s.jsx("li",{children:s.jsx("a",{href:"#",children:"7"})}),s.jsx("li",{children:s.jsx("a",{href:"#",children:s.jsx("i",{className:"bi bi-chevron-right"})})})]})})]})})},page=()=>{let[e,t]=(0,r.useState)(!1);return s.jsx(o.default,{children:(0,s.jsxs)("div",{className:"main-page-wrapper",children:[s.jsx(n.Z,{isOpenSidebar:e,setIsOpenSidebar:t}),s.jsx(job_area,{setIsOpenSidebar:t})]})})}},62439:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>o,default:()=>l});var s=a(95153);let r=(0,s.createProxy)(String.raw`D:\avdent\mmv_freelance_frontend\src\app\dashboard\employ-dashboard\jobs\page.tsx`),{__esModule:o,$$typeof:n}=r,i=r.default,l=i}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[3591,6802,3407,6854,4422,421,6971,4860,2919,906,4102],()=>__webpack_exec__(79962));module.exports=a})();