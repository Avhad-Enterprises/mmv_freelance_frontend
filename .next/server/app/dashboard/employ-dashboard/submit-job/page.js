(()=>{var e={};e.id=5785,e.ids=[5785],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},65657:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>o});var a=r(67096),s=r(16132),i=r(37284),l=r.n(i),n=r(32564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let o=["",{children:["dashboard",{children:["employ-dashboard",{children:["submit-job",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,16706)),"D:\\avdent\\mmv_freelance_frontend\\src\\app\\dashboard\\employ-dashboard\\submit-job\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,67925)),"D:\\avdent\\mmv_freelance_frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\avdent\\mmv_freelance_frontend\\src\\app\\dashboard\\employ-dashboard\\submit-job\\page.tsx"],p="/dashboard/employ-dashboard/submit-job/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/employ-dashboard/submit-job/page",pathname:"/dashboard/employ-dashboard/submit-job",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},85430:(e,t,r)=>{Promise.resolve().then(r.bind(r,68842))},68842:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>page});var a=r(30784),s=r(9885),i=r(26971),l=r(90906),n=r(92919),d=r(85786),o=r(48781),c=r(57114),p=r(57897),u=r(10345);let submit_job_area=({setIsOpenSidebar:e})=>{let[t,r]=(0,s.useState)({project_title:"",project_description:"",project_category:"Designer",projects_type:"Full time",budget:"",skills_required:[],deadline:"",additional_notes:"",project_format:"",audio_voiceover:"",video_length:"",preferred_video_style:"",reference_links:[],is_active:0,url:"",meta_title:"",meta_description:""}),[i,l]=(0,s.useState)(!1),[h,m]=(0,s.useState)(null),x=(0,c.useRouter)(),[_,j]=(0,s.useState)([]),[b,g]=(0,s.useState)([]),[v,f]=(0,s.useState)(""),[y,k]=(0,s.useState)([]),addSkill=async()=>{let e=v.trim();if(!(!e||_.includes(e))){if(b.includes(e)){let t=[..._,e];j(t),r(e=>({...e,skills_required:t})),f(""),g([]);return}try{let t=await (0,o.jB)("tags/insertskill",{skill_name:e,created_by:h});if(console.log("Insert skill response",t),t.data?.message==="Skill already exists"||t?.data){let t=[..._,e];j(t),r(e=>({...e,skills_required:t}))}f(""),g([])}catch(e){console.error("Failed to insert skill:",e)}}},fetchSkill=async e=>{try{let t=await (0,o.xe)("tags/getallskill"),r=Array.isArray(t.data?.data)?t.data.data:[],a=r.map(e=>e.skill_name).filter(t=>t.toLowerCase().includes(e.toLowerCase()));g(a)}catch(e){console.error("Failed to fetch skills:",e),g([])}},removeSkill=e=>{let t=_.filter(t=>t!==e);j(t),r(e=>({...e,skills_required:t}))};(0,s.useEffect)(()=>{let fetchCategories=async()=>{try{let e=await (0,o.xe)("category/getallcategorys"),t=e.data?.data||[],r=t.map(e=>({value:e.name,label:e.name}));k(r)}catch(e){console.error("Error fetching categories:",e)}};fetchCategories()},[]),(0,s.useEffect)(()=>{let e=(0,p.r)();e?.user_id?(m(e.user_id),r(t=>({...t,client_id:e.user_id,created_by:e.user_id}))):u.toast.error("Please log in to post a Project.")},[]);let handleInputChange=e=>{let{name:t,value:a}=e.target;r(e=>{let r={...e,[t]:a};if("project_title"===t||"project_description"===t){let s="project_title"===t?a:e.project_title,i="project_description"===t?a:e.project_description;r.url=s?.toLowerCase()?.trim()?.replace(/[^\w\s-]/g,"")?.replace(/\s+/g,"-")?.slice(0,100),r.meta_title=s?.slice(0,60);let l=i?.replace(/<[^>]+>/g,"").trim();r.meta_description=l?.slice(0,160)}return r})},handleSubmit=async e=>{if(e.preventDefault(),!h){u.toast.error("Please log in to post a Project.");return}if(!t.project_title||!t.project_description||!t.budget){u.toast.error("Please fill in all required fields (Title, Description, Salary).");return}if(!t.skills_required.length){u.toast.error("Please add at least one skill.");return}let a="";if(t.deadline){if(!/^\d{4}-\d{2}-\d{2}$/.test(t.deadline)){u.toast.error("Please enter a valid deadline date (YYYY-MM-DD).");return}let[e,r,s]=t.deadline.split("-");a=`${s}/${r}/${e}`}else{u.toast.error("Please select a deadline date.");return}let s={client_id:t.client_id,project_title:t.project_title,project_description:t.project_description,project_category:t.project_category,projects_type:t.projects_type,budget:parseFloat(t.budget)||0,skills_required:t.skills_required,deadline:t.deadline,additional_notes:t.additional_notes,project_format:t.project_format,audio_voiceover:t.audio_voiceover,video_length:parseInt(t.video_length)||0,preferred_video_style:t.preferred_video_style,reference_links:t.reference_links,is_active:t.is_active,url:t.url,meta_title:t.meta_title,meta_description:t.meta_description,created_by:t.created_by};l(!0);try{console.log("Submitting deadline:",a),console.log("Submitting Project data:",s);let e=await (0,o.jB)("projectsTask/insertprojects_task",s);console.log("API response:",e),e.data.success||"inserted"===e.data.message?(u.toast.success("\uD83C\uDF89 Project posted successfully!"),r({project_title:"",project_description:"",project_category:"Designer",projects_type:"Full time",budget:"",skills_required:[],deadline:"",additional_notes:"",project_format:"",audio_voiceover:"",video_length:"",preferred_video_style:"",reference_links:[],is_active:0,url:"",meta_title:"",meta_description:"",client_id:h,created_by:h}),x.push("/dashboard/employ-dashboard/jobs")):u.toast.error(e.data?.message||"Failed to post Project. Invalid data.")}catch(e){console.error("Error posting Project:",e),u.toast.error(e.response?.data?.message||e.message||"Error posting Project. Please try again.")}finally{l(!1)}};return a.jsx("div",{className:"dashboard-body",children:(0,a.jsxs)("div",{className:"position-relative",children:[a.jsx(n.Z,{setIsOpenSidebar:e}),a.jsx("h2",{className:"main-title",children:"Add a New Project"}),(0,a.jsxs)("form",{onSubmit:handleSubmit,children:[(0,a.jsxs)("div",{className:"bg-white card-box border-20 mb-50 p-5",children:[a.jsx("h4",{className:"dash-title-three",children:"Project Details"}),(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"project_title",children:"Title*"}),a.jsx("input",{type:"text",name:"project_title",value:t.project_title,onChange:handleInputChange,placeholder:"Ex: Product Designer"})]}),(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"project_description",children:"Description"}),a.jsx("textarea",{className:"size-lg",name:"project_description",value:t.project_description,onChange:handleInputChange,placeholder:"Write about the Project in details...",required:!0})]}),(0,a.jsxs)("div",{className:"row align-items-end",children:[a.jsx("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"",children:"Category"}),a.jsx(d.Z,{options:y,defaultCurrent:-1,onChange:e=>{r(t=>({...t,project_category:e.value}))},name:"Job Category"})]})}),a.jsx("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"project_format",children:"Project Format"}),a.jsx("input",{type:"text",name:"project_format",value:t.project_format,onChange:handleInputChange,placeholder:"Ex: MP4",required:!0})]})}),a.jsx("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"",children:"Budget"}),a.jsx("input",{type:"text",name:"budget",value:t.budget,onChange:handleInputChange,placeholder:"10000",required:!0})]})}),a.jsx("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"",children:"Statu*s"}),a.jsx(d.Z,{options:[{value:"0",label:"Inactive"},{value:"1",label:"Active"}],defaultCurrent:0,onChange:e=>{r(t=>({...t,is_active:"Inactive"===e.value?0:1}))},name:"Status"})]})}),a.jsx("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"deadline",children:"Deadline*"}),a.jsx("input",{type:"date",name:"deadline",value:t.deadline,onChange:handleInputChange,required:!0})]})})]})]}),(0,a.jsxs)("div",{className:"bg-white card-box border-20 mb-50 p-5",children:[a.jsx("h4",{className:"dash-title-three",children:"Skills*"}),(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"",children:"Skills"}),a.jsx("input",{type:"text",placeholder:"Type skill and press Enter",value:v,onChange:e=>{let t=e.target.value;f(t),fetchSkill(t)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),addSkill())}}),b.length>0&&a.jsx("div",{style:{position:"relative",background:"#fff",border:"1px solid #ccc",maxHeight:"200px",overflowY:"auto",zIndex:10},children:b.map(e=>a.jsx("div",{style:{padding:"8px",cursor:"pointer"},onClick:()=>{if(!_.includes(e)){let t=[..._,e];j(t)}f(""),g([])},children:e},e))}),a.jsx("div",{style:{marginTop:"10px"},children:_.map((e,t)=>(0,a.jsxs)("span",{style:{display:"inline-block",background:"#eee",padding:"5px 10px",marginRight:"5px",borderRadius:"15px"},children:[e," ",a.jsx("button",{type:"button",onClick:()=>removeSkill(e),style:{marginLeft:"5px"},children:"✕"})]},t))}),a.jsx("div",{className:"skill-input-data d-flex align-items-center flex-wrap",children:t.skills_required.map((e,t)=>a.jsx("button",{type:"button",children:e},t))})]})]}),(0,a.jsxs)("div",{className:"bg-white card-box border-20 mb-50 p-5",children:[a.jsx("h4",{className:"dash-title-three",children:"Reference Link"}),(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"",children:"Reference Link"}),a.jsx("textarea",{placeholder:"Add Reference Links (one per line, press Enter to add)",onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){e.preventDefault();let a=e.currentTarget,s=a.value.trim();s&&!t.reference_links.includes(s)&&(r(e=>({...e,reference_links:[...e.reference_links,s]})),a.value="")}},rows:3}),a.jsx("div",{className:"skill-input-data d-flex align-items-center flex-wrap",children:t.reference_links.map((e,t)=>a.jsx("button",{type:"button",children:e},t))})]}),(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"additional_notes",children:"Additional Notes"}),a.jsx("textarea",{className:"size-lg",name:"additional_notes",value:t.additional_notes,onChange:handleInputChange,placeholder:"Write about the additonal notes in details...",required:!0})]})]}),(0,a.jsxs)("div",{className:"bg-white card-box border-20",children:[a.jsx("h4",{className:"dash-title-three",children:"SEO"}),(0,a.jsxs)("div",{className:"row align-items-end",children:[a.jsx("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"",children:"URL*"}),a.jsx("input",{type:"text",name:"url",value:t.url,onChange:handleInputChange,placeholder:"url",required:!0})]})}),a.jsx("div",{className:"col-md-6",children:(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"project_format",children:"Meta Title*"}),a.jsx("input",{type:"text",name:"meta_title",value:t.meta_title,onChange:handleInputChange,placeholder:"Enter Meta Title here",required:!0})]})})]}),(0,a.jsxs)("div",{className:"dash-input-wrapper mb-30",children:[a.jsx("label",{htmlFor:"",children:"Meta Description*"}),a.jsx("textarea",{className:"size-lg",name:"meta_description",value:t.meta_description,onChange:handleInputChange,placeholder:"Write about the meta description in details...",required:!0})]})]}),(0,a.jsxs)("div",{className:"button-group d-inline-flex align-items-center mt-30",children:[a.jsx("button",{type:"submit",className:"dash-btn-two tran3s me-3",disabled:i||!h,children:i?"Submitting...":"Post Project"}),a.jsx("a",{href:"#",className:"dash-cancel-btn tran3s",children:"Cancel"})]})]})]})})},page=()=>{let[e,t]=(0,s.useState)(!1);return a.jsx(i.default,{children:(0,a.jsxs)("div",{className:"main-page-wrapper",children:[a.jsx(l.Z,{isOpenSidebar:e,setIsOpenSidebar:t}),a.jsx(submit_job_area,{setIsOpenSidebar:t})]})})}},16706:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>d});var a=r(95153);let s=(0,a.createProxy)(String.raw`D:\avdent\mmv_freelance_frontend\src\app\dashboard\employ-dashboard\submit-job\page.tsx`),{__esModule:i,$$typeof:l}=s,n=s.default,d=n}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[3591,6802,3407,2982,6854,4422,421,6971,5786,4860,2919,906],()=>__webpack_exec__(65657));module.exports=r})();